<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts by Pavit Kaur</title>
    <link>https://pavitkaur05.github.io/post/</link>
    <description>Recent content in Posts  by Pavit Kaur</description>
    
    <language>en</language>
    <copyright>2021 Pavit Kaur All rights reserved</copyright>
    <lastBuildDate>Sun, 04 Jul 2021 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://pavitkaur05.github.io/post/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Tutorial: Integrating OmniAuth with Sinatra Application</title>
      <link>https://pavitkaur05.github.io/post/omniauth-with-sinatra/</link>
      <pubDate>Sun, 04 Jul 2021 00:00:00 +0000</pubDate>
      <author>pavitk1@gmail.com (Pavit Kaur)</author>
      <guid>https://pavitkaur05.github.io/post/omniauth-with-sinatra/</guid>
      <description>&lt;p&gt;As part of my GSoC project, my first task includes that user could login into their account on &lt;a href=&#34;https://ci.debian.net/&#34;&gt;debci&lt;/a&gt; using their &lt;a href=&#34;https://salsa.debian.org/&#34;&gt;Debian Salsa&lt;/a&gt; account (collaborative development server for Debian based on the GitLab software).&lt;/p&gt;
&lt;p&gt;The task is officially completed using &lt;a href=&#34;https://github.com/omniauth/omniauth&#34;&gt;OmniAuth&lt;/a&gt; library and while implementing it, I found that the documentation of OmniAuth is quite a mix-match and more focused on using it with Rails app and this gives me a idea to write a tutorial for people looking to integrate OmniAuth with Sinatra application. So here it is.&lt;/p&gt;
&lt;p&gt;Now, depending on the provider, Omniauth requires specific strategy which are generally released individually as RubyGems. For this tutorial, I would be using &lt;code&gt;omniauth-gitlab&lt;/code&gt; which I used for Debian Salsa in my project, &lt;code&gt;omniauth-twitter&lt;/code&gt; and a &lt;code&gt;developer&lt;/code&gt; strategy which could be used for project in development mode and comes with &lt;code&gt;omniauth&lt;/code&gt; gem itself.&lt;/p&gt;
&lt;p&gt;For simplicity purposes, I have included all routes and OmniAuth configurations in a single file &lt;code&gt;app.rb&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s start.&lt;/p&gt;
&lt;h3 id=&#34;register-your-application&#34;&gt;Register your application&lt;/h3&gt;
&lt;p&gt;This can be easily done – just head over to provider (Twitter, Salsa) website and find the option to &lt;strong&gt;create a new application&lt;/strong&gt; and fill in the form. In the callback URL field, you need to append &lt;code&gt;/auth/:provider/callback&lt;/code&gt; to whichever URL you used in the website field.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://pavitkaur05.github.io/images/tutorial-register-app.png&#34; alt=&#34;tutorial-register-app&#34;&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;client-id&lt;/code&gt; and &lt;code&gt;client-secret&lt;/code&gt; is obtained from the console which is used in further step to set up OmniAuth.&lt;/p&gt;
&lt;h3 id=&#34;gems&#34;&gt;Gems&lt;/h3&gt;
&lt;p&gt;At the top of the file, we require the necessary gems of for our project&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;require &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sinatra&amp;#39;&lt;/span&gt;
require &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;omniauth&amp;#39;&lt;/span&gt;
require &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;omniauth-gitlab&amp;#39;&lt;/span&gt;
require &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;omniauth-twitter&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;enable-sessions&#34;&gt;Enable sessions&lt;/h3&gt;
&lt;p&gt;In order for OmniAuth to work and to store the logged in user across requests, sessions need to be activated and if activated, you have one session hash per user session.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;configure &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    set &lt;span style=&#34;color:#e6db74&#34;&gt;:sessions&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;set-up-omniauth-configurations&#34;&gt;Set up OmniAuth configurations&lt;/h3&gt;
&lt;p&gt;OmniAuth::Builder Rack middleware build up your list of OmniAuth strategies for use in your application:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;use &lt;span style=&#34;color:#66d9ef&#34;&gt;OmniAuth&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;Builder&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; development?
      provider &lt;span style=&#34;color:#e6db74&#34;&gt;:developer&lt;/span&gt;,
               &lt;span style=&#34;color:#e6db74&#34;&gt;fields&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:name&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;,
               &lt;span style=&#34;color:#e6db74&#34;&gt;uid_field&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;:name&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
    provider &lt;span style=&#34;color:#e6db74&#34;&gt;:gitlab&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;#client-id , #client-secret,&lt;/span&gt;
             &lt;span style=&#34;color:#e6db74&#34;&gt;scope&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;read_user&amp;#34;&lt;/span&gt;,
             &lt;span style=&#34;color:#e6db74&#34;&gt;client_options&lt;/span&gt;: {
               &lt;span style=&#34;color:#e6db74&#34;&gt;site&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://salsa.debian.org/api/v4/&amp;#39;&lt;/span&gt;
             }
    provider &lt;span style=&#34;color:#e6db74&#34;&gt;:twitter&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;#client-id , #client-secret,&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here, few things to note could be the extra options used with providers, as&lt;br&gt;
In &lt;strong&gt;developer&lt;/strong&gt;:&lt;br&gt;
&lt;code&gt;fields&lt;/code&gt; : to specify the form fields for login in developer mode and by default it has name and email.&lt;br&gt;
&lt;code&gt;uid_field&lt;/code&gt;: to specify that which field&amp;rsquo;s value could be obtained as uid and by default it is email.&lt;br&gt;
In &lt;strong&gt;gitlab&lt;/strong&gt;:&lt;br&gt;
&lt;code&gt;scope&lt;/code&gt;: to limit the scope of application, by default, the api scope is requested and must be allowed in GitLab&amp;rsquo;s application configuration.&lt;br&gt;
&lt;code&gt;client_options&lt;/code&gt;: to specify the server being used as client based on Gitlab software.&lt;br&gt;
&lt;strong&gt;Note&lt;/strong&gt;: In case you want to have a different callback url other than the default &lt;code&gt;/auth/:provider/callback&lt;/code&gt;, it can be specified using &lt;code&gt;redirect_url&lt;/code&gt; option in case of &lt;code&gt;gitlab&lt;/code&gt; provider and accordingly update it in your Application Configuration at provider&amp;rsquo;s console.&lt;/p&gt;
&lt;h4 id=&#34;extra-configurations&#34;&gt;Extra configurations&lt;/h4&gt;
&lt;p&gt;To redirect to &lt;code&gt;auth/failure&lt;/code&gt; route in case of failure even in developer mode, following could be added:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;OmniAuth&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;config&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;on_failure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; proc &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;env&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;OmniAuth&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FailureEndpoint&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;new(env)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;redirect_to_failure
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;By default, OmniAuth will log to STDOUT but you can configure this. If you don&amp;rsquo;t want OmniAuth to log to STDOUT, following could be used:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;OmniAuth&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;config&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;logger&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;level &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;Logger&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;UNKNOWN&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;setting-up-routes&#34;&gt;Setting up routes&lt;/h3&gt;
&lt;h5 id=&#34;login-route&#34;&gt;Login route&lt;/h5&gt;
&lt;p&gt;Starting with GET &lt;code&gt;/login&lt;/code&gt; route, where you can specify the options available to login:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;get &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/login&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&amp;lt;~&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;HTML&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;form method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;post&amp;#39;&lt;/span&gt; action&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/gitlab&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;input type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hidden&amp;#34;&lt;/span&gt; name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;authenticity_token&amp;#34;&lt;/span&gt; value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;#{request.env[&amp;#34;rack.session&amp;#34;][&amp;#34;csrf&amp;#34;]}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;button type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;submit&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;Login&lt;/span&gt; with &lt;span style=&#34;color:#66d9ef&#34;&gt;Salsa&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/button&amp;gt;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;lt;/&lt;/span&gt;form&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;form method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;post&amp;#39;&lt;/span&gt; action&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/twitter&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;input type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hidden&amp;#34;&lt;/span&gt; name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;authenticity_token&amp;#34;&lt;/span&gt; value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;#{request.env[&amp;#34;rack.session&amp;#34;][&amp;#34;csrf&amp;#34;]}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;button type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;submit&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;Login&lt;/span&gt; with &lt;span style=&#34;color:#66d9ef&#34;&gt;Twitter&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/button&amp;gt;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;lt;/&lt;/span&gt;form&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;form method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;post&amp;#39;&lt;/span&gt; action&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/developer&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;input type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hidden&amp;#34;&lt;/span&gt; name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;authenticity_token&amp;#34;&lt;/span&gt; value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;#{request.env[&amp;#34;rack.session&amp;#34;][&amp;#34;csrf&amp;#34;]}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;button type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;submit&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;Login&lt;/span&gt; with &lt;span style=&#34;color:#66d9ef&#34;&gt;Developer&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/button&amp;gt;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;lt;/&lt;/span&gt;form&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;HTML&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The &lt;code&gt;auth/:provider&lt;/code&gt; path is created and configured automatically by OmniAuth, so you just need to send the request to that paths and auth process will start.&lt;br&gt;
&lt;em&gt;As per the OmniAuth version 2.0, OmniAuth now defaults to only POST as allowed request_phase methods and &lt;code&gt;authenticity_token&lt;/code&gt; is required to validate your requests so make sure to take care of this.&lt;/em&gt;&lt;/p&gt;
&lt;h5 id=&#34;callback-routes&#34;&gt;Callback routes:&lt;/h5&gt;
&lt;p&gt;On success from authentication, Omniauth will return the hash of information to the &lt;code&gt;auth/:provider/callback&lt;/code&gt; in the Rack environment under the key &lt;code&gt;omniauth.auth&lt;/code&gt; so this is what you can use in your desired way like creating a entry to your database and storing the current user in &lt;code&gt;session&lt;/code&gt; params.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;get &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/:provider/callback&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    erb &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;lt;h1&amp;gt;Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#{&lt;/span&gt;request&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;env&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;omniauth.auth&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;info&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;/h1&amp;gt;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;

post &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/developer/callback&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    erb &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;lt;h1&amp;gt;Hello &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#{&lt;/span&gt;request&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;env&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;omniauth.auth&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;info&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;][&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;/h1&amp;gt;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here, POST request method is used for &lt;code&gt;developer&lt;/code&gt; strategy and GET request method for &lt;code&gt;twitter&lt;/code&gt; and &lt;code&gt;gitlab&lt;/code&gt; as that is how their working is defined in their respective strategies.&lt;/p&gt;
&lt;h5 id=&#34;failure-route&#34;&gt;Failure route:&lt;/h5&gt;
&lt;p&gt;If user authentication fails on the provider side, OmniAuth will catch the response and then redirect the request to the path &lt;code&gt;/auth/failure&lt;/code&gt;, passing a corresponding error message in a parameter named message.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;get &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/auth/failure&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    halt(&lt;span style=&#34;color:#ae81ff&#34;&gt;403&lt;/span&gt;, erb(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;h2&amp;gt;Authentication Failed&amp;lt;/h2&amp;gt;&amp;lt;h4&amp;gt;Reason: &amp;lt;/h4&amp;gt;&amp;lt;pre&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;#{&lt;/span&gt;params&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:message&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;))
&lt;span style=&#34;color:#66d9ef&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;final-result&#34;&gt;Final result&lt;/h3&gt;
&lt;p&gt;That&amp;rsquo;s it, our application is all set to be tested. And this is how it will be working.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://pavitkaur05.github.io/images/232441e2d8a740ff4d8f5bfb61c190763557a289.gif&#34; alt=&#34;Tutorial&#34;&gt;&lt;/p&gt;
&lt;p&gt;Here, I have already logged into my respective accounts so page for entring credentials does not show up but if the user has not logged into his account, he would be first asked to log in.&lt;/p&gt;
&lt;p&gt;For complete code, you can check out:
&lt;a href=&#34;https://github.com/PavitKaur05/OmniAuthWithSinatra&#34;&gt;OmniAuth with Sinatra Tutorial&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So this completes the tutorial. I hope it helps others who are looking to integrate their Ruby Applications with OmniAuth. If you have any feedback, feel free to let me know.&lt;/p&gt;
&lt;p&gt;See you next time!&lt;/p&gt;
</description> 
    </item>
    
    <item>
      <title>GSoC: About my Project and Community Bonding Period</title>
      <link>https://pavitkaur05.github.io/post/gsoc-about-my-project-and-community-bonding-period/</link>
      <pubDate>Tue, 08 Jun 2021 12:00:00 +0000</pubDate>
      <author>pavitk1@gmail.com (Pavit Kaur)</author>
      <guid>https://pavitkaur05.github.io/post/gsoc-about-my-project-and-community-bonding-period/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;https://pavitkaur05.github.io/images/debcixgsoc.jpeg&#34; alt=&#34;alt text&#34;&gt;&lt;/p&gt;
&lt;p&gt;To start writing about updates regarding my GSoC project, the first obvious thing I need to do is to explain what my project really is. So let’s get started.&lt;/p&gt;
&lt;h2 id=&#34;about-my-project&#34;&gt;About my project&lt;/h2&gt;
&lt;h4 id=&#34;what-is-debci&#34;&gt;What is debci?&lt;/h4&gt;
&lt;p&gt;Directly stating from the official docs:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Debian continuous integration (debci) is an automated system that coordinates the execution of automated tests against packages in the Debian system.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&#34;lets-try-decoding-it&#34;&gt;Let&amp;rsquo;s try decoding it:&lt;/h5&gt;
&lt;p&gt;Debian is a huge system with thousands of packages and within these packages exist inter-package dependencies. So if any package is updated, it is important to test if that package is working correctly but it is equally important to test that all the packages which are dependent on this updated package are working correctly too.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://ci.debian.net/&#34;&gt;Debci&lt;/a&gt; is a platform serving this purpose of automated testing for the entire Debian archive whenever a new version of the package, or of any package in its dependency chain is available. It comes with a UI that lets developers easily run tests and see their results if they pass or not.&lt;/p&gt;
&lt;p&gt;For my GSoC project, I am working to implement some incremental improvements to debci making it easier to use and maintain.&lt;/p&gt;
&lt;h2 id=&#34;community-bonding-period&#34;&gt;Community Bonding Period&lt;/h2&gt;
&lt;h4 id=&#34;the-debci-community&#34;&gt;The debci community&lt;/h4&gt;
&lt;p&gt;Everyone I have come across till now in the community is very nice. The debci community in itself is a small but active community. It really feels good to be a part of conversations here.&lt;/p&gt;
&lt;h4 id=&#34;weekly-call-set-up&#34;&gt;Weekly call set up&lt;/h4&gt;
&lt;p&gt;I have two mentors for this project Antonio Terceiro and Paul Gevers and they have set up a weekly sync call with me in which I will share my updates regarding the work done in the past week, any issues I am facing, and discuss the work for next week.  In addition to this, I can always contact them on IRC for any issue I am stuck in.&lt;/p&gt;
&lt;h4 id=&#34;work-till-now&#34;&gt;Work till now&lt;/h4&gt;
&lt;p&gt;The first thing I did in the community bonding period is setting up this blog. I wanted to have one for a long time and this seems to be a really nice opportunity to start. And the fact this has been added to &lt;a href=&#34;https://planet.debian.org/&#34;&gt;Planet Debian&lt;/a&gt; too makes me happier to write. I am still trying to get a hang of this and definitely need to learn how to spend less time writing it.&lt;/p&gt;
&lt;p&gt;I also worked on my already opened merge requests during this period and got them merged.&lt;/p&gt;
&lt;p&gt;Since I am already familiar with the codebase, so I started with my first deliverable a bit earlier before the official coding period begins which is &lt;strong&gt;migrating the logins to Salsa, Debian’s Gitlab Instance.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Currently, debci uses Debian SSO client certificates for logging in, but that is deprecated so it needs to be migrated to use &lt;a href=&#34;https://salsa.debian.org/&#34;&gt;Salsa&lt;/a&gt; as an identity provider.&lt;/p&gt;
&lt;p&gt;The OmniAuth library is being used to implement this with help of ruby-omniauth-gitlab strategy. I explored a great deal about integrating OmniAuth with our application and bumped into so many issues too when I began implementing that. Once I am done integrating the Salsa Authentication with debci, I am planning to write a separate tutorial on that which could be helpful to other people using OmniAuth with their application.&lt;/p&gt;
&lt;p&gt;With that, the community bonding period has ended on 7th June and the coding period officially begins and for now, I will be continuing working on my first deliverable.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s all for now. See you next time!&lt;/p&gt;
</description> 
    </item>
    
    <item>
      <title>Journey to GSoC</title>
      <link>https://pavitkaur05.github.io/post/journey-to-gsoc/</link>
      <pubDate>Tue, 25 May 2021 12:00:00 +0000</pubDate>
      <author>pavitk1@gmail.com (Pavit Kaur)</author>
      <guid>https://pavitkaur05.github.io/post/journey-to-gsoc/</guid>
      <description>&lt;p&gt;I am really excited that my Google Summer of Code proposal with Debian for the project &lt;strong&gt;“Debian Continuous Integration improvements”&lt;/strong&gt; has been accepted. Through this blog, I am here to share about my Pre-GSoC journey.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://pavitkaur05.github.io/images/gsoc.jpeg&#34; alt=&#34;alt text&#34;&gt;&lt;/p&gt;
&lt;p&gt;I knew about GSoC since my first year of college but had this misconception that only great coders get selected for GSoC which did not let me apply to the program until my 3rd year of engineering. I applied this year not because I thought I have turned into one but because I actually wanted to give a fair try to this before the time I become ineligible to participate.&lt;/p&gt;
&lt;h2 id=&#34;finding-project&#34;&gt;Finding Project&lt;/h2&gt;
&lt;p&gt;Scrolling through the list of GSoC 2021 organizations, I was checking out projects of organizations I am familiar with. Debian is one of the huge Open Source communities that has always inspired developers around the world to contribute to Open Source. So as I checked through Debian projects, I got excited to find the “Debian Continuous Integration improvements” project  (referred to as debci in this post) related to web development and more concerned with backend work which is something I am very much interested in.&lt;/p&gt;
&lt;p&gt;I joined the community, and as directed by the application tasks of the project I set up the debci on my machine and started with an issue labeled as a newcomer. Soon I was able to submit my first Merge Request and it was reviewed by Antonio Terceiro, the mentor of my GSoC Project. With his further guidance, I was able to turn MR into an acceptable patch, and voila it got merged! That really did boost my morale to contribute further to the project.&lt;/p&gt;
&lt;h2 id=&#34;student-application-period&#34;&gt;Student Application Period&lt;/h2&gt;
&lt;p&gt;At the suggestion of the mentor, during the Student Application Period, I worked on more open issues which were helping me understand the codebase better and in turn the deliverables of the project for my proposal. For my every doubt, I first tried to tackle it myself, and if still not able to find a solution I turn to mentors who did their best to answer my queries and this is how I completed my proposal and got it reviewed by Antonio before finally submitting it on 13th April. I still cannot express that feeling of satisfaction I achieved on submitting the proposal. I finally successfully applied for GSoC.&lt;/p&gt;
&lt;h2 id=&#34;after-proposal-submission&#34;&gt;After Proposal Submission&lt;/h2&gt;
&lt;p&gt;I did not stop my contribution after the Student Application period ended and kept on working on more issues which helped me stay in touch with the project and also because I was enjoying it a lot. I had already made up my mind to contribute more in Open Source as I learned and enjoyed plenty during this process.&lt;/p&gt;
&lt;h2 id=&#34;day-of-results&#34;&gt;Day of Results&lt;/h2&gt;
&lt;p&gt;On 17th May, I got my acceptance mail at around 11:30 pm at night and I remember screaming and waking everybody up in my home to announce the news to them. It was truly the happiest moment for me.&lt;/p&gt;
&lt;h2 id=&#34;moment-of-truth&#34;&gt;Moment of Truth&lt;/h2&gt;
&lt;p&gt;I would admit that I got involved with GSoC because of the reputation associated with it but things I learned during this pre GSoC period have made me realize the fun and learning opportunities associated with working opensource and I am here to stay for sure.&lt;/p&gt;
&lt;p&gt;I plan to write more blogs regarding my project and keep you guys updated about my work. Stay tuned!&lt;/p&gt;
</description> 
    </item>
    
  </channel>
</rss>

