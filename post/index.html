<!DOCTYPE html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport"    content="width=device-width, initial-scale=1.0">
  	<meta name="description" content="">
  	<meta name="author"      content="map[email:pavitk1@gmail.com name:Pavit Kaur]">
    
    	<title>Posts</title>
	<link rel="shortcut icon" href="https://pavitkaur05.github.io/images/gt_favicon.png">
	<link rel="alternate" type="application/rss+xml" href="https://pavitkaur05.github.io/index.xml" title="My Site">
	
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css" rel="stylesheet">
	
	
	<script defer src="https://use.fontawesome.com/releases/v5.0.11/js/all.js" integrity="sha384-ImVoB8Er8knetgQakxuBS4G3RSkyD8IZVVQCAnmRJrDwqJFYUE4YOv+DbIofcO9C" crossorigin="anonymous"></script>
	
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700">
	
	
  
  <link rel="stylesheet" href="https://pavitkaur05.github.io/css/styles.min.478ce7f1a7e39f30dd5d9e06334de159c15dff169ed6a37c9787a11587b5044191393621cd4d4526fc1394fbcac15e9291bb69d0fb3ae8b777d95cb0c3bb33f1.css" integrity="sha512-R4zn8afjnzDdXZ4GM03hWcFd/xae1qN8l4ehFYe1BEGROTYhzU1FJvwTlPvKwV6Skbtp0Ps66Ld32Vyww7sz8Q==">

   
  

	<link rel="alternate" type="application/rss+xml" href="https://pavitkaur05.github.io/post/index.xml" title="Pavit Kaur" />

  </head>
  
  <body class="home">
    
      


<nav class="navbar navbar-default navbar-sticky">
    <div class="container-fluid">

        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="true">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1">

            <ul class="nav navbar-nav">
            
                
                <li>
                    <a href="/">home</a>
                </li>
                
            
                
                <li>
                    <a href="/post/">blog</a>
                </li>
                
            
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
            
            </ul>

        </div> 
        
    </div>
</nav>

</header>
    
 
    
<main id="main">

	<div class="container">
		<div class="row topspace">
			<div class="col-sm-8 col-sm-offset-2">

        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="August 23, 2021">August 23, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/gsoc-final-evaluation/" rel="bookmark">GSoC 2021: Final Evaluation</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Project: <strong>Incremental Improvements to Debian‚Äôs CI platform</strong><br>
Project Link: <a href="https://summerofcode.withgoogle.com/projects/#6433686825730048">https://summerofcode.withgoogle.com/projects/#6433686825730048</a><br>
Code Repository: <a href="https://salsa.debian.org/ci-team/debci">https://salsa.debian.org/ci-team/debci</a><br>
Mentors: <a href="https://salsa.debian.org/terceiro">Antonio Terceiro</a> and <a href="https://salsa.debian.org/elbrus">Paul Gevers</a></p>
<h4 id="about-the-project"><strong>About the Project</strong></h4>
<p><strong>Debian Continuous Integration</strong> is Debian‚Äôs CI platform. It runs tests on the packages published in the Debian archive, and today is used to control migration of packages from unstable, Debian‚Äôs development area, to testing, the area of the archive where the next Debian release is being prepared. This makes it a crucial part of Debian‚Äôs infrastructure.</p>
<p>The <a href="https://ci.debian.net">web platform</a> shows the results of all the tests executed. Debian CI provides developers both <strong>API</strong> and a GUI <strong>Self-Service</strong> section to request tests for the packages and get information on test history.</p>
<p>This project involves implementing incremental improvements to the platform, making it easier to use and maintain.</p>
<h5 id="deliverables-of-the-project">Deliverables of the project:</h5>
<ul>
<li>Migrating Logins to Salsa</li>
<li>Adding support for testing security uploads and Debian LTS</li>
</ul>
<h4 id="work-done"><strong>Work done</strong></h4>
<h5 id="migrating-logins-to-salsa">Migrating Logins to Salsa</h5>
<ul>
<li>
<p>Originally, Debian CI used Debian SSO client certificates for logging in, but since that was deprecated logins are migrated to <a href="https://salsa.debian.org/">Salsa</a>, Debian‚Äôs Gitlab instance and this is implemented with the help of <a href="https://github.com/omniauth/omniauth">OmniAuth</a>, the ruby authentication framework.</p>
</li>
<li>
<p>Another thing fixed as part of this task was that there exists a limitation in the existing database structure, where usernames were directly stored as the test requestor field, so that relationship was normalized with a proper foreign key to the users table.</p>
</li>
</ul>
<p>Merge Requests:</p>
<ul>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/179">Migrate to logins using Salsa</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/181">Update the jobs table to add real reference to users table</a></li>
</ul>
<h5 id="adding-support-for-testing-security-uploads-and-debian-lts">Adding support for testing security uploads and Debian LTS</h5>
<p>In this task, work was done to enable private tests in Debian CI for adding support for testing security uploads and Debian LTS. It includes tasks from adding the <code>private</code> field in the <strong>API</strong> and <strong>Self-Service</strong> section in requesting tests to adding an option to <code>publish</code> them when ready through both interfaces.</p>
<p>Merge Requests:</p>
<ul>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/182">Add private jobs flag to jobs</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/183">Submit private jobs via API</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/184">Fix in migration file</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/185">Submit private jobs via Self Service</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/186">Add extra-apt-sources in API</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/187">Add extra-apt-sources via Self Service</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/189">Validate extra apt sources</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/190">Publish private tests via API</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/191">Update Self-Service Job History Page</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/193">Add Publish and Retry in Self-Service</a></li>
</ul>
<h5 id="others">Others</h5>
<p>I worked on some issues to add usability improvements for the web interface:</p>
<ul>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/180">Change Retry link to point to the self-service interface</a></li>
<li><a href="https://salsa.debian.org/ci-team/debci/-/merge_requests/195">Add a user menu in the self-service interface</a></li>
</ul>
<h4 id="learning-takeaways"><strong>Learning Takeaways</strong></h4>
<p>I learned a lot throughout the entire journey. Some of the things to mention are:</p>
<ul>
<li><strong>Writing tests:</strong> I learned about using <code>Rspec</code> for writing tests in ruby and understood how writing tests is an integral part of coding any project.</li>
<li><strong>Using good coding practices:</strong> By my merge requests reviews done by my mentor Antonio, I came to know about good coding practices which help in keeping the code both clean and concise.</li>
</ul>
<h4 id="acknowledgement"><strong>Acknowledgement</strong></h4>
<p>I owe huge thanks to my mentors <strong>Antonio Terceiro</strong> and <strong>Paul Gevers</strong> for their constant support and guidance throughout the entire duration. It is for them that I was able to get started with the code-base of the project in the first place. And while working on the project, they were extremely responsive to all my queries. My merge requests were all thoroughly reviewed which enables me to learn more and work more efficiently. It was a complete pleasure interacting with them on weekly meet calls.</p>
<p>To sum up, my GSoC journey was awesome üéâ and I had a fun and productive summer with <strong>Debian</strong> üòÉ</p>
<h4 id="whats-next"><strong>What&rsquo;s next?</strong></h4>
<p>As part of a continuation of my project task <strong>Adding support for testing security uploads and Debian LTS</strong>, I would be working on Debian CI to facilitate the process of connecting the embargoed archive.</p>
<p>It&rsquo;s the end of my GSoC journey but certainly not the end of my journey with <strong>Debian</strong> or <strong>Open-Source</strong>. I plan to stay an active contributor to <strong>Debian</strong> and get involve with more Open Source projects as well üåü</p>
<h4 id="extras"><strong>Extras</strong></h4>
<p>The link to my Salsa Profile for all my work activities can be found <a href="https://salsa.debian.org/PavitKaur05">here</a>.<br>
To know more about my journey, my other GSoC blog posts can be found below:</p>
<ul>
<li><a href="https://pavitkaur05.github.io/post/journey-to-gsoc/">Journey to GSoC</a></li>
<li><a href="https://pavitkaur05.github.io/post/gsoc-about-my-project-and-community-bonding-period/">GSoC: About my Project and Community Bonding Period</a></li>
<li><a href="https://pavitkaur05.github.io/post/gsoc-phase-1/">GSoC: First Phase of Coding Period</a></li>
<li><a href="https://pavitkaur05.github.io/post/gsoc-phase-2/">GSoC: Second Phase of Coding Period</a></li>
</ul>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="August 21, 2021">August 21, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/gsoc-phase-2/" rel="bookmark">GSoC: Second Phase of Coding Period</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Hello there.</p>
<p>So here we are near the end of <strong>GSoC 2021</strong> and with that, I am sharing details of the work I completed in the second phase of the coding period.</p>
<p><img src="/images/gsoc-coding-period-2.jpeg" alt="coding-period-2"></p>
<p>Continuing with details of the task I left on&hellip;</p>
<h4 id="task-adding-support-for-testing-security-uploads-and-debian-lts"><strong>Task: Adding support for testing security uploads and Debian LTS</strong></h4>
<ul>
<li>
<p>The <code>extra-apt-sources</code> parameter is added to both <strong>API</strong> and <strong>Self-Service</strong> section for the <code>test request</code> object and the part which took some time was deciding on its validation since if you ever deal with <code>apt sources</code>, you would know that there exist a lot of combinations of a valid <code>apt source</code> and in the end, the decision was taken to just add the minimal checks.</p>
</li>
<li>
<p>Since, we have enough setup to request <code>private</code> tests, it made sense to have a way of looking them up in the <strong>Self-Service</strong> section. So a new column is added to the test records in <code>Job-History</code> marking the <code>visibility</code> of a test (<code>private</code> or <code>public</code>) and a new filter to filter out records based on the <code>visibility</code>.</p>
</li>
<li>
<p>The option to <code>retry</code> tests is also added in <strong>Self-Service</strong> in the <code>Job-History</code> section so that <code>private</code> tests can also be retried. As earlier, this option was only available in Package History pages but those pages do not show the <code>private</code> tests.</p>
</li>
<li>
<p>The next thing in the list was to <code>publish</code> these test results of <code>private</code> tests at some point.
For the <strong>API</strong> section, a new endpoint is added to accept a string of <code>run_ids</code> which is ready to be published, and for the <strong>Self-Service</strong> , in the Job-History page a <code>Publish</code> button is added to be clicked after check boxing the required tests.</p>
</li>
</ul>
<p>This ends the list of my planned work for the project. üéâ</p>
<h4 id="some-more-interesting-stuff"><strong>Some more interesting stuff</strong></h4>
<p>As we got some more time for the coding period to end, my mentor Antonio Terceiro suggested that I could pick any issue from the opened issues list to work on so I picked up the one to add a user menu for the <strong>Self-Service</strong> section and completed that.</p>
<p>Antonio also gave me insights into <strong>Debian Packaging</strong> and even let me try packaging a newer upstream version of the package <a href="https://salsa.debian.org/ruby-team/itamae/-/commit/18a9d883cd83f8aab46f51a97ba20c1e52ff41fa">itamae</a> which is one of the packages maintained by him.</p>
<p>I also worked on creating a video about my GSoC project for <a href="https://debconf21.debconf.org/">DebConf21</a> and this was truly the hardest thing to do. From setting up everything to final editing, it took me about 2 days to create something sane to submit. Now, I am excited about DebConf21 üòÉ</p>
<p>That concludes my work in the second phase of the coding period and next, I will be sharing my <strong>Final Evaluation Submission</strong> real soon.</p>
<p>Stay tuned!</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="July 14, 2021">July 14, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/gsoc-phase-1/" rel="bookmark">GSoC: First Phase of Coding Period</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Hello there.</p>
<p>I still can&rsquo;t believe that the first half of GSoC period is almost over. So it&rsquo;s been about 5 weeks working on the project and that means I have a lot to share about it. So without further ado, let&rsquo;s get started.</p>
<p><img src="/images/gsoc-coding-period-1.jpeg" alt="coding-period-1"></p>
<p>I will be listing up my work done in the respective tasks.</p>
<h4 id="task-migrating-logins-to-salsa"><strong>Task: Migrating Logins to Salsa</strong></h4>
<p>The objective of this task was that the users could log in to their account on <a href="https://ci.debian.net/">debci</a> using their <a href="https://salsa.debian.org/">Debian Salsa</a> account (collaborative development server for Debian based on the GitLab software) and this is implemented with the help of <a href="https://github.com/omniauth/omniauth">OmniAuth</a>, the ruby authentication framework.</p>
<p>At the beginning of this, I had to discuss quite a few issues with my mentors that I was bumping into, and by the end of it with multiple revisions and discussions, the following was implemented:</p>
<ul>
<li>
<p>The previous users' table schema of debci comprises the username field which contained mostly the emails of the users with some exceptions and to accommodate the Salsa logins, a new uid field is added to the table to store the Salsa uid of the logged-in user with the username field storing Salsa usernames now and as the Salsa users have the liberty to change their usernames, the updation of username as well as in debci database is also taken care of.</p>
</li>
<li>
<p>For Salsa login, the <code>ruby-omniauth-gitlab</code> strategy has been used and for login in development mode, the <code>developer</code> strategy which comes with <code>ruby-omniauth</code> has been set up.</p>
</li>
<li>
<p>Added a Login Page giving the option to log in using Salsa and an additional option to login in Developer Mode which is accessible only in Development Setup so that other contributors don&rsquo;t have to set up dummy Salsa applications for working.</p>
</li>
<li>
<p>Added specs for the new login process. This was an interesting part, as I got the chance to understand RSpec and facilities provided by OmniAuth to mock the authentication for Integration Testing.</p>
</li>
<li>
<p>One blocker that I dealt with was that the Debian release from where packages were pulled out for debci have the OmniAuth version 1.8, which was not working well with the developer strategy implementation for the application so to resolve that I did a minor change to the callback API for <code>developer</code> strategy until the time that release have the newer version of OmniAuth.</p>
</li>
<li>
<p>Another thing we discussed in one of the meetings that in the existing database structure, the tests do not have a real reference to the users' table and rather the username is stored directly as a string for the requestor field, so this thing was fixed as part of this task.</p>
</li>
</ul>
<p>The migration of the existing users' data for the new logins was handled by my mentor Antonio Terceiro and with this, our first task is concluded. All these changes are now part of <a href="https://ci.debian.net/">Debian Continuous Integration platform</a> and you can find the blogpost for same by Antonio <a href="https://terceiro.xyz/2021/06/27/debian-continuous-integration-now-using-salsa-logins/">here.</a></p>
<p>This task also allowed me to write my first ever tutorial <a href="https://pavitkaur05.github.io/post/omniauth-with-sinatra/">Tutorial: Integrating OmniAuth with Sinatra Application</a> to help people looking to integrate their ruby application with OmniAuth.</p>
<p>Moving further to the next task in progress.</p>
<h4 id="task-adding-support-for-testing-security-uploads-and-debian-lts"><strong>Task: Adding support for testing security uploads and Debian LTS</strong></h4>
<p>This is the next task I am working on enabling private tests in debci for adding support for testing security uploads and Debian LTS. Since it&rsquo;s a bigger task, it is broken down into about 6-7 steps and till now, the following has been done:</p>
<ul>
<li>
<p>The schema of jobs' (tests) table is updated to have a boolean field to store whether the job is private or not.</p>
</li>
<li>
<p>The <code>is_private</code> parameter is added to both <strong>API</strong> and <strong>Self-Service</strong> section so the private test can be submitted through the API  as well as through GUI form on the web platform.</p>
</li>
<li>
<p>Another thing which comes up through discussion in meetings that a parameter is required to add <code>extra-apt-sources</code> for getting packages of security repository and this is the part in progress.</p>
</li>
</ul>
<p>So that concludes my work till now. It has been an amazing journey with lots of learning and also the guidance from the wonderful mentors of my project and I am looking forward to more exciting parts ahead.</p>
<p>That&rsquo;s all for now. See you next time!</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="July 4, 2021">July 4, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/omniauth-with-sinatra/" rel="bookmark">Tutorial: Integrating OmniAuth with Sinatra Application</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>As part of my GSoC project, my first task includes that user could login into their account on <a href="https://ci.debian.net/">debci</a> using their <a href="https://salsa.debian.org/">Debian Salsa</a> account (collaborative development server for Debian based on the GitLab software).</p>
<p>The task is officially completed using <a href="https://github.com/omniauth/omniauth">OmniAuth</a> library and while implementing it, I found that the documentation of OmniAuth is quite a mix-match and more focused on using it with Rails app and this gives me a idea to write a tutorial for people looking to integrate OmniAuth with Sinatra application. So here it is.</p>
<p>Now, depending on the provider, Omniauth requires specific strategy which are generally released individually as RubyGems. For this tutorial, I would be using <code>omniauth-gitlab</code> which I used for Debian Salsa in my project, <code>omniauth-twitter</code> and a <code>developer</code> strategy which could be used for project in development mode and comes with <code>omniauth</code> gem itself.</p>
<p>For simplicity purposes, I have included all routes and OmniAuth configurations in a single file <code>app.rb</code>.</p>
<p>Let&rsquo;s start.</p>
<h3 id="register-your-application">Register your application</h3>
<p>This can be easily done ‚Äì just head over to provider (Twitter, Salsa) website and find the option to <strong>create a new application</strong> and fill in the form. In the callback URL field, you need to append <code>/auth/:provider/callback</code> to whichever URL you used in the website field.</p>
<p><img src="/images/tutorial-register-app.png" alt="tutorial-register-app"></p>
<p>The <code>client-id</code> and <code>client-secret</code> is obtained from the console which is used in further step to set up OmniAuth.</p>
<h3 id="gems">Gems</h3>
<p>At the top of the file, we require the necessary gems of for our project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;sinatra&#39;</span>
require <span style="color:#e6db74">&#39;omniauth&#39;</span>
require <span style="color:#e6db74">&#39;omniauth-gitlab&#39;</span>
require <span style="color:#e6db74">&#39;omniauth-twitter&#39;</span>
</code></pre></div><h3 id="enable-sessions">Enable sessions</h3>
<p>In order for OmniAuth to work and to store the logged in user across requests, sessions need to be activated and if activated, you have one session hash per user session.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">configure <span style="color:#66d9ef">do</span>
    set <span style="color:#e6db74">:sessions</span>, <span style="color:#66d9ef">true</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><h3 id="set-up-omniauth-configurations">Set up OmniAuth configurations</h3>
<p>OmniAuth::Builder Rack middleware build up your list of OmniAuth strategies for use in your application:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">use <span style="color:#66d9ef">OmniAuth</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Builder</span> <span style="color:#66d9ef">do</span>
    <span style="color:#66d9ef">if</span> development?
      provider <span style="color:#e6db74">:developer</span>,
               <span style="color:#e6db74">fields</span>: <span style="color:#f92672">[</span><span style="color:#e6db74">:name</span><span style="color:#f92672">]</span>,
               <span style="color:#e6db74">uid_field</span>: <span style="color:#e6db74">:name</span>
    <span style="color:#66d9ef">end</span>
    provider <span style="color:#e6db74">:gitlab</span>, <span style="color:#75715e">#client-id , #client-secret,</span>
             <span style="color:#e6db74">scope</span>: <span style="color:#e6db74">&#34;read_user&#34;</span>,
             <span style="color:#e6db74">client_options</span>: {
               <span style="color:#e6db74">site</span>: <span style="color:#e6db74">&#39;https://salsa.debian.org/api/v4/&#39;</span>
             }
    provider <span style="color:#e6db74">:twitter</span>, <span style="color:#75715e">#client-id , #client-secret,</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><p>Here, few things to note could be the extra options used with providers, as<br>
In <strong>developer</strong>:<br>
<code>fields</code> : to specify the form fields for login in developer mode and by default it has name and email.<br>
<code>uid_field</code>: to specify that which field&rsquo;s value could be obtained as uid and by default it is email.<br>
In <strong>gitlab</strong>:<br>
<code>scope</code>: to limit the scope of application, by default, the api scope is requested and must be allowed in GitLab&rsquo;s application configuration.<br>
<code>client_options</code>: to specify the server being used as client based on Gitlab software.<br>
<strong>Note</strong>: In case you want to have a different callback url other than the default <code>/auth/:provider/callback</code>, it can be specified using <code>redirect_url</code> option in case of <code>gitlab</code> provider and accordingly update it in your Application Configuration at provider&rsquo;s console.</p>
<h4 id="extra-configurations">Extra configurations</h4>
<p>To redirect to <code>auth/failure</code> route in case of failure even in developer mode, following could be added:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">OmniAuth</span><span style="color:#f92672">.</span>config<span style="color:#f92672">.</span>on_failure <span style="color:#f92672">=</span> proc <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>env<span style="color:#f92672">|</span>
    <span style="color:#66d9ef">OmniAuth</span><span style="color:#f92672">::</span><span style="color:#66d9ef">FailureEndpoint</span><span style="color:#f92672">.</span>new(env)<span style="color:#f92672">.</span>redirect_to_failure
<span style="color:#66d9ef">end</span>
</code></pre></div><p>By default, OmniAuth will log to STDOUT but you can configure this. If you don&rsquo;t want OmniAuth to log to STDOUT, following could be used:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#66d9ef">OmniAuth</span><span style="color:#f92672">.</span>config<span style="color:#f92672">.</span>logger<span style="color:#f92672">.</span>level <span style="color:#f92672">=</span> <span style="color:#66d9ef">Logger</span><span style="color:#f92672">::</span><span style="color:#66d9ef">UNKNOWN</span>
</code></pre></div><h3 id="setting-up-routes">Setting up routes</h3>
<h5 id="login-route">Login route</h5>
<p>Starting with GET <code>/login</code> route, where you can specify the options available to login:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">get <span style="color:#e6db74">&#39;/login&#39;</span> <span style="color:#66d9ef">do</span>
    <span style="color:#f92672">&lt;&lt;~</span><span style="color:#66d9ef">HTML</span>
    <span style="color:#f92672">&lt;</span>form method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;post&#39;</span> action<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/auth/gitlab&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>input type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;authenticity_token&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#{request.env[&#34;rack.session&#34;][&#34;csrf&#34;]}&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>button type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;submit&#39;</span><span style="color:#f92672">&gt;</span><span style="color:#66d9ef">Login</span> with <span style="color:#66d9ef">Salsa</span><span style="color:#f92672">&lt;</span><span style="color:#e6db74">/button&gt;
</span><span style="color:#e6db74">    &lt;/</span>form<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>form method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;post&#39;</span> action<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/auth/twitter&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>input type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;authenticity_token&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#{request.env[&#34;rack.session&#34;][&#34;csrf&#34;]}&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>button type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;submit&#39;</span><span style="color:#f92672">&gt;</span><span style="color:#66d9ef">Login</span> with <span style="color:#66d9ef">Twitter</span><span style="color:#f92672">&lt;</span><span style="color:#e6db74">/button&gt;
</span><span style="color:#e6db74">    &lt;/</span>form<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>form method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;post&#39;</span> action<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/auth/developer&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>input type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;authenticity_token&#34;</span> value<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;#{request.env[&#34;rack.session&#34;][&#34;csrf&#34;]}&#39;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>button type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;submit&#39;</span><span style="color:#f92672">&gt;</span><span style="color:#66d9ef">Login</span> with <span style="color:#66d9ef">Developer</span><span style="color:#f92672">&lt;</span><span style="color:#e6db74">/button&gt;
</span><span style="color:#e6db74">    &lt;/</span>form<span style="color:#f92672">&gt;</span>
  <span style="color:#66d9ef">HTML</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><p>The <code>auth/:provider</code> path is created and configured automatically by OmniAuth, so you just need to send the request to that paths and auth process will start.<br>
<em>As per the OmniAuth version 2.0, OmniAuth now defaults to only POST as allowed request_phase methods and <code>authenticity_token</code> is required to validate your requests so make sure to take care of this.</em></p>
<h5 id="callback-routes">Callback routes:</h5>
<p>On success from authentication, Omniauth will return the hash of information to the <code>auth/:provider/callback</code> in the Rack environment under the key <code>omniauth.auth</code> so this is what you can use in your desired way like creating a entry to your database and storing the current user in <code>session</code> params.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">get <span style="color:#e6db74">&#39;/auth/:provider/callback&#39;</span> <span style="color:#66d9ef">do</span>
    erb <span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">    &lt;h1&gt;Hello </span><span style="color:#e6db74">#{</span>request<span style="color:#f92672">.</span>env<span style="color:#f92672">[</span><span style="color:#e6db74">&#39;omniauth.auth&#39;</span><span style="color:#f92672">][</span><span style="color:#e6db74">&#39;info&#39;</span><span style="color:#f92672">][</span><span style="color:#e6db74">&#39;name&#39;</span><span style="color:#f92672">]</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/h1&gt;&#34;</span>
<span style="color:#66d9ef">end</span>

post <span style="color:#e6db74">&#39;/auth/developer/callback&#39;</span> <span style="color:#66d9ef">do</span>
    erb <span style="color:#e6db74">&#34;
</span><span style="color:#e6db74">    &lt;h1&gt;Hello </span><span style="color:#e6db74">#{</span>request<span style="color:#f92672">.</span>env<span style="color:#f92672">[</span><span style="color:#e6db74">&#39;omniauth.auth&#39;</span><span style="color:#f92672">][</span><span style="color:#e6db74">&#39;info&#39;</span><span style="color:#f92672">][</span><span style="color:#e6db74">&#39;name&#39;</span><span style="color:#f92672">]</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/h1&gt;&#34;</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><p>Here, POST request method is used for <code>developer</code> strategy and GET request method for <code>twitter</code> and <code>gitlab</code> as that is how their working is defined in their respective strategies.</p>
<h5 id="failure-route">Failure route:</h5>
<p>If user authentication fails on the provider side, OmniAuth will catch the response and then redirect the request to the path <code>/auth/failure</code>, passing a corresponding error message in a parameter named message.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">get <span style="color:#e6db74">&#39;/auth/failure&#39;</span> <span style="color:#66d9ef">do</span>
    halt(<span style="color:#ae81ff">403</span>, erb(<span style="color:#e6db74">&#34;&lt;h2&gt;Authentication Failed&lt;/h2&gt;&lt;h4&gt;Reason: &lt;/h4&gt;&lt;pre&gt;</span><span style="color:#e6db74">#{</span>params<span style="color:#f92672">[</span><span style="color:#e6db74">:message</span><span style="color:#f92672">]</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/pre&gt;&#34;</span>))
<span style="color:#66d9ef">end</span>
</code></pre></div><h3 id="final-result">Final result</h3>
<p>That&rsquo;s it, our application is all set to be tested. And this is how it will be working.</p>
<p><img src="/images/232441e2d8a740ff4d8f5bfb61c190763557a289.gif" alt="Tutorial"></p>
<p>Here, I have already logged into my respective accounts so page for entring credentials does not show up but if the user has not logged into his account, he would be first asked to log in.</p>
<p>For complete code, you can check out:
<a href="https://github.com/PavitKaur05/OmniAuthWithSinatra">OmniAuth with Sinatra Tutorial</a></p>
<p>So this completes the tutorial. I hope it helps others who are looking to integrate their Ruby Applications with OmniAuth. If you have any feedback, feel free to let me know.</p>
<p>See you next time!</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="June 8, 2021">June 8, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/gsoc-about-my-project-and-community-bonding-period/" rel="bookmark">GSoC: About my Project and Community Bonding Period</a>
						</h1>
					</header>
					<div class="entry-content">
						<p><img src="/images/debcixgsoc.jpeg" alt="alt text"></p>
<p>To start writing about updates regarding my GSoC project, the first obvious thing I need to do is to explain what my project really is. So let‚Äôs get started.</p>
<h2 id="about-my-project">About my project</h2>
<h4 id="what-is-debci">What is debci?</h4>
<p>Directly stating from the official docs:</p>
<blockquote>
<p>The Debian continuous integration (debci) is an automated system that coordinates the execution of automated tests against packages in the Debian system.</p>
</blockquote>
<h5 id="lets-try-decoding-it">Let&rsquo;s try decoding it:</h5>
<p>Debian is a huge system with thousands of packages and within these packages exist inter-package dependencies. So if any package is updated, it is important to test if that package is working correctly but it is equally important to test that all the packages which are dependent on this updated package are working correctly too.</p>
<p><a href="https://ci.debian.net/">Debci</a> is a platform serving this purpose of automated testing for the entire Debian archive whenever a new version of the package, or of any package in its dependency chain is available. It comes with a UI that lets developers easily run tests and see their results if they pass or not.</p>
<p>For my GSoC project, I am working to implement some incremental improvements to debci making it easier to use and maintain.</p>
<h2 id="community-bonding-period">Community Bonding Period</h2>
<h4 id="the-debci-community">The debci community</h4>
<p>Everyone I have come across till now in the community is very nice. The debci community in itself is a small but active community. It really feels good to be a part of conversations here.</p>
<h4 id="weekly-call-set-up">Weekly call set up</h4>
<p>I have two mentors for this project Antonio Terceiro and Paul Gevers and they have set up a weekly sync call with me in which I will share my updates regarding the work done in the past week, any issues I am facing, and discuss the work for next week.  In addition to this, I can always contact them on IRC for any issue I am stuck in.</p>
<h4 id="work-till-now">Work till now</h4>
<p>The first thing I did in the community bonding period is setting up this blog. I wanted to have one for a long time and this seems to be a really nice opportunity to start. And the fact this has been added to <a href="https://planet.debian.org/">Planet Debian</a> too makes me happier to write. I am still trying to get a hang of this and definitely need to learn how to spend less time writing it.</p>
<p>I also worked on my already opened merge requests during this period and got them merged.</p>
<p>Since I am already familiar with the codebase, so I started with my first deliverable a bit earlier before the official coding period begins which is <strong>migrating the logins to Salsa, Debian‚Äôs Gitlab Instance.</strong></p>
<p>Currently, debci uses Debian SSO client certificates for logging in, but that is deprecated so it needs to be migrated to use <a href="https://salsa.debian.org/">Salsa</a> as an identity provider.</p>
<p>The OmniAuth library is being used to implement this with help of ruby-omniauth-gitlab strategy. I explored a great deal about integrating OmniAuth with our application and bumped into so many issues too when I began implementing that. Once I am done integrating the Salsa Authentication with debci, I am planning to write a separate tutorial on that which could be helpful to other people using OmniAuth with their application.</p>
<p>With that, the community bonding period has ended on 7th June and the coding period officially begins and for now, I will be continuing working on my first deliverable.</p>
<p>That&rsquo;s all for now. See you next time!</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="May 25, 2021">May 25, 2021</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://pavitkaur05.github.io/post/journey-to-gsoc/" rel="bookmark">Journey to GSoC</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>I am really excited that my Google Summer of Code proposal with Debian for the project <strong>‚ÄúDebian Continuous Integration improvements‚Äù</strong> has been accepted. Through this blog, I am here to share about my Pre-GSoC journey.</p>
<p><img src="https://pavitkaur05.github.io/images/gsoc.jpeg" alt="alt text"></p>
<p>I knew about GSoC since my first year of college but had this misconception that only great coders get selected for GSoC which did not let me apply to the program until my 3rd year of engineering. I applied this year not because I thought I have turned into one but because I actually wanted to give a fair try to this before the time I become ineligible to participate.</p>
<h2 id="finding-project">Finding Project</h2>
<p>Scrolling through the list of GSoC 2021 organizations, I was checking out projects of organizations I am familiar with. Debian is one of the huge Open Source communities that has always inspired developers around the world to contribute to Open Source. So as I checked through Debian projects, I got excited to find the ‚ÄúDebian Continuous Integration improvements‚Äù project  (referred to as debci in this post) related to web development and more concerned with backend work which is something I am very much interested in.</p>
<p>I joined the community, and as directed by the application tasks of the project I set up the debci on my machine and started with an issue labeled as a newcomer. Soon I was able to submit my first Merge Request and it was reviewed by Antonio Terceiro, the mentor of my GSoC Project. With his further guidance, I was able to turn MR into an acceptable patch, and voila it got merged! That really did boost my morale to contribute further to the project.</p>
<h2 id="student-application-period">Student Application Period</h2>
<p>At the suggestion of the mentor, during the Student Application Period, I worked on more open issues which were helping me understand the codebase better and in turn the deliverables of the project for my proposal. For my every doubt, I first tried to tackle it myself, and if still not able to find a solution I turn to mentors who did their best to answer my queries and this is how I completed my proposal and got it reviewed by Antonio before finally submitting it on 13th April. I still cannot express that feeling of satisfaction I achieved on submitting the proposal. I finally successfully applied for GSoC.</p>
<h2 id="after-proposal-submission">After Proposal Submission</h2>
<p>I did not stop my contribution after the Student Application period ended and kept on working on more issues which helped me stay in touch with the project and also because I was enjoying it a lot. I had already made up my mind to contribute more in Open Source as I learned and enjoyed plenty during this process.</p>
<h2 id="day-of-results">Day of Results</h2>
<p>On 17th May, I got my acceptance mail at around 11:30 pm at night and I remember screaming and waking everybody up in my home to announce the news to them. It was truly the happiest moment for me.</p>
<h2 id="moment-of-truth">Moment of Truth</h2>
<p>I would admit that I got involved with GSoC because of the reputation associated with it but things I learned during this pre GSoC period have made me realize the fun and learning opportunities associated with working opensource and I am here to stay for sure.</p>
<p>I plan to write more blogs regarding my project and keep you guys updated about my work. Stay tuned!</p>

					</div>
				</article>
        
			</div>
		</div>

		<center class="">
			<ul class="pagination">
        


			</ul>
		</center>
	</div>	

</main>

    
    
      <footer id="footer">
	<div class="container">
		<div class="row">
			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Contact</h3>
				<div class="widget-body">
					<p>
					<a href="mailto:pavitk1@gmail.com">pavitk1@gmail.com</a><br>
					<br>
					
					</p>
				</div>
			</div>
			

			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Follow me</h3>
				<div class="widget-body">
					<p class="follow-me-icons">
            
							
            
							
								<a href="https://twitter.com/PavitKaur4" target="_blank"><i class="fab fa-twitter-square fa-1x"></i></a>
							
            
							
            
							
            
							
								<a href="https://www.linkedin.com/in/pavit-kaur-a23604178/" target="_blank"><i class="fab fa-linkedin fa-1x"></i></a>
							
            
							
            
							
								<a href="https://github.com/PavitKaur05" target="_blank"><i class="fab fa-github fa-1x"></i></a>
							
            
							
            
							
								<a href="https://salsa.debian.org/PavitKaur05" target="_blank"><i class="fab fa-gitlab fa-1x"></i></a>
							
            
							
								<a href="https://pavitkaur05.github.io/post/index.xml" target="_blank"><i class="fas fa-rss fa-1x"></i></a>
							
            
					</p>
				</div>
			</div>
			

			

			

		</div> 
	</div>
</footer>

<footer id="underfooter">
	<div class="container">
		<div class="row">

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p></p>
				</div>
			</div>

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p class="text-right">
						Copyright &copy; 2025, Pavit Kaur<br>
						Design: <a href="http://www.gettemplate.com" rel="designer">Initio by GetTemplate</a> - 
						Powered by: <a href="https://gohugo.io/" rel="poweredby">Hugo</a>
					</p>
				</div>
			</div>

		</div> 
	</div>
</footer>




<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>




<script src="https://pavitkaur05.github.io/js/bundle.min.f4a965ad0a8118e32f8f0f158ff3aadbacf700934c22286a1a5b245105e9006da73a873b001a160db22498909c1df14d1f835dba5ad76f80b32b0234182b2a58.js" integrity="sha512-9KllrQqBGOMvjw8Vj/Oq26z3AJNMIihqGlskUQXpAG2nOoc7ABoWDbIkmJCcHfFNH4NdulrXb4CzKwI0GCsqWA=="></script>

<script id="dsq-count-scr" src="///count.js" async></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

    
  </body>
  
</html>